generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model likes {
  postId  Int
  by      String
  likedAt DateTime @default(now())
  user    user     @relation(fields: [by], references: [userId], map: "Likes_by_fkey")
  post    post     @relation(fields: [postId], references: [id], map: "Likes_postId_fkey")

  @@id([postId, by])
  @@index([by], map: "Likes_by_fkey")
}

model post {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  content   String   @db.Text
  likes     Int      @default(0)
  authorId  String
  likes     likes[]
  user      user     @relation(fields: [authorId], references: [userId], map: "Post_authorId_fkey")

  @@index([authorId], map: "Post_authorId_fkey")
}

model user {
  snsId     String?
  provider  String?
  userId    String   @id
  firstName String
  lastName  String
  gender    Int      @default(0)
  createdAt DateTime @default(now())
  likes     likes[]
  post      post[]

  @@unique([snsId, provider], map: "User_snsId_provider_key")
}
